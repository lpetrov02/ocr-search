# Что происходит

### extract_module_solr
Здесь собраны функции для извлечения текстового слоя из DjVu, а также для индексирования этого текстового слоя с помощью Apache Solr.  
Основные возможности:  
- **clean**  
Чистит индекс. Если передать аргументом список файлов, то из индекса будут удалены только они. Если не передавать ничего, индекс будт очищен полностью.  
- **index**  
    Добавляет файл в индекс.  
    В индексе хранятся:  
    1.  айдишник слова;  
    2. само слово вместе с содержащим его файлом, номером страницы, номером строки и 	порядковым номером слова в строке;  
    3. два предыдущих слова;  
    4. для пред-предыдущего слова также хранятся номер его страницы и строки в формате *"page"_"line"* - это нужно для поиска словосочетаний длиной более 3 слов (вероятно, 	это лишнее);  
    5. координаты слова на странице (видимо, в пикселях) - возможно, оно будет полезно для обучения моделей...  
		
-**find**  
Умеет искать словосочетания любой длины, в том числе с небольшими опечатками.  
Словосочетания длиной в 1 или 2 слова обрабатываются в один проход, если слов больше, то уже рекурсивно, что прилично увеличивает время работы.  
На выходе мы имеем zip-list из двух list'ов. Элемент такого массива соответствует входжению словосочетания в текст и представляет собой, разумется, пару словарей - с информацией о первом и последнем словах найденного словосочетания, соответственно.  
Там есть:
- file: понятно  
- page-line-pos: страница, строка и номер слова в строке в формате *страница_строка_позиция* (и это всё одна строка str)  
- word: собственно само слово  
- word-1 и word-1-page-line-pos - аналогично, но для предыдущего слова  
- id: айдишник в формате *имяфайла_номерслова*  
- coords: строка с координатами левого нижнего и правого верхнего (вроде бы) конца слова на странице. Наверное, может пригодиться для обучения моделей  

искать тоже можно лишь в конкретных файлах - для этого надо указать параметр files=[...] и перечислить нужные файлы.
